<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>SD Medical</title>

  <style>
    html,
    body {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }
    #swipeButton {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 99;
      padding: 10px;
      background-color: white;
      border: 1px solid #ccc;
      cursor: pointer;
    }
  </style>

  <!-- Load ArcGIS API for JavaScript -->
  <link rel="stylesheet" href="https://js.arcgis.com/4.30/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.30/"></script>
</head>

<body>

  <!-- Container for the map -->
  <div id="viewDiv" style="height: 100%; width: 100%;"></div>
  
  <!-- Button to activate swipe tool -->
  <button id="swipeButton">Activate Swipe</button>

  <script>
    require([
      "esri/WebMap",
      "esri/views/MapView",
      "esri/widgets/LayerList",
      "esri/widgets/Expand",
      "esri/widgets/BasemapGallery",
      "esri/widgets/Home",
      "esri/widgets/Swipe",
      "esri/widgets/Legend"
    ], function(WebMap, MapView, LayerList, Expand, BasemapGallery, Home, Swipe, Legend) {

      // Create a WebMap instance with the web map item ID
      var webmap = new WebMap({
        portalItem: {
          id: "5658e02ff5494a7da041e1655d3e0353" // Replace with your web map item ID
        }
      });

      // Create a MapView instance to display the WebMap
      var view = new MapView({
        container: "viewDiv",
        map: webmap
      });

      view.when(function() {
        // MAP NAVIGATION TOOLS
        var homeButton = new Home({
          view: view
        });
        view.ui.add(homeButton, "top-left");

        // ADDING UTILITIES

        // Adding the layers list
        let layerList = new LayerList({
          view: view
        });
        const dataLayers = new Expand({
          view: view,
          content: layerList,
          group: 'button-widget'
        });
        view.ui.add(dataLayers, "top-right");

        // Add basemap gallery to the expand
        const basemapGallery = new BasemapGallery({
          view: view,
          container: document.createElement("div")
        });

        const baseMaps = new Expand({
          view: view,
          content: basemapGallery,
          group: 'button-widget'
        });

        view.ui.add(baseMaps, "top-right");

        // Add Legend widget
        var legend = new Legend({
          view: view
        });
        view.ui.add(legend, "bottom-left");

        // Initialize Swipe widget, but do not add it yet
        let swipe = new Swipe({
          view: view,
          leadingLayers: [webmap.layers.getItemAt(1)], // First layer
          trailingLayers: [webmap.layers.getItemAt(2)], // Second layer
          position: 0 // Position of the swipe tool as a percentage
        });

        // Add event listener to the button to activate the swipe tool
        document.getElementById("swipeButton").addEventListener("click", function() {
          view.ui.add(swipe);
          document.getElementById("swipeButton").disabled = true; // Disable the button after activating swipe
        });

      });
    });
  </script>

</body>
</html>
